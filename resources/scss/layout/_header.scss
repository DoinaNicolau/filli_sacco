//======================================================================
//  HEADER STYLING (Versione Finale - Animazione Fluida)
//======================================================================
@import '../abstracts/variables';
@import '../abstracts/mixins';
//  variabile per la transizione, 
$header-transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);

// 1. CONTENITORE ESTERNO
// ---------------------------------------------------------------------
// Gestisce il posizionamento e lo spazio.
.site-header {
    position: relative;
    z-index: 1000;
    // Spazio sopra e sotto la navbar. Questo sparisce allo scroll.
    padding: 1rem 0;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);

    &.is-sticky {
        position: fixed;
        top: 0;
        left: 0;
        right: 0; // Usiamo left e right 0 per centrare il contenuto
        padding: 0;
        padding: 1rem 0; // Manteniamo il padding per dare altezza
        
    }
}

// 2. CONTENITORE INTERNO
// ---------------------------------------------------------------------

.header-inner {
    max-width: 95%; 
    margin: 0 auto;

    // Stile Vetro e Bordi
    border-radius: 12px;
    border: 1px solid var(--header-border-glass);
    box-shadow: var(--shadow-soft);
    background: var(--header-bg-glass);
    transition: $header-transition;

    // Effetto Vetro
    @supports (backdrop-filter: blur(10px)) or (-webkit-backdrop-filter: blur(10px)) {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
    }
}


// Stato STICKY: modifica SOLO lo stile interno, NON la larghezza
.site-header.is-sticky .header-inner {
    max-width: 95%; // come in stato normale (oppure lascia invariato)
    border-radius: 0 0 12px 12px; // stondato solo in basso
    box-shadow: var(--shadow-strong);
    background: var(--header-bg-glass-sticky);
}
.header-container {
    // Questo gestisce solo il padding interno della navbar
    // Puoi aggiustare questo valore come preferisci (es. 1rem)
    padding: 0 1.5rem;
}

// 3. CONTENUTO DELL'HEADER
// ---------------------------------------------------------------------
.header-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1.5rem;
    min-height: 60px;
}


// 4. NAVIGAZIONE DESKTOP
// ---------------------------------------------------------------------
.main-navigation {
    ul {
        display: flex;
        gap: 0.5rem;
        margin: 0;
        padding: 0;
        list-style: none;
    }

    a {
        display: block;
        padding: 0.75rem 1rem;
        color: var(--text-link);
        font-weight: 600;
        text-decoration: none;
        border-radius: 25px;
        transition: color 0.3s ease, background-color 0.3s ease, transform 0.2s ease;
        position: relative;

        &::after {
            content: '';
            position: absolute;
            bottom: 5px;
            left: 50%;
            width: 0;
            height: 2px;
            background: $gold-gradient;
            border-radius: 1px;
            transition: all 0.35s cubic-bezier(0.19, 1, 0.22, 1);
            transform: translateX(-50%);
        }

        &:hover {
            color: var(--text-link-gold, $gold-accent);
            @include hover-glow($primary-blue);
            background-color: transparent;
            

            &::after {
                width: calc(100% - 2rem);
            }
        }

        &.active {
            color: var(--text-link-gold, $gold-accent);
            @include hover-glow($primary-blue);
            background-color: transparent;
           
            &::after {
                width: calc(100% - 2rem);
            }
        }
    }
}

// 5. AZIONI (AUTH, TEMA, HAMBURGER)
// ---------------------------------------------------------------------
.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
 // --- : Stile per il menu utente autenticato ---
    .user-menu {
        display: flex;
        align-items: center;
        gap: 0.8rem; // Spazio tra nome utente e bottone di logout

        .user-name {
            font-weight: 600;
            color: var(--text-secondary); 
            white-space: nowrap; 
        }

        .logout-form {
            margin: 0;
            padding: 0;
            display: inline-block; // Per allinearlo correttamente
        }

        // Stile specifico per il bottone di logout nella barra desktop
        .btn-outline {
            padding: 0.5rem 1rem;
            font-size: 0.85em;
        }
    }
}

// --- NUOVO: Stile per il menu mobile ---
.mobile-menu {
    // --- STATO INIZIALE: NASCOSTO ---
    background-color: var(--bg-secondary); // Sfondo leggermente diverso per distinguerlo
    border-radius: 0 0 12px 12px;
    padding-top: 1rem;
    padding-bottom: 1.5rem;
    box-shadow: var(--shadow-strong);
    
    // Logica per nasconderlo con animazione
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    visibility: hidden;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);

    // --- STATO FINALE: APERTO ---
    // Aggiungiamo questa classe con JavaScript quando si clicca l'hamburger
    &.is-open {
        max-height: 500px; // Un valore alto per permettere l'espansione
        opacity: 1;
        visibility: visible;
    }

    // Stile della navigazione interna al menu mobile
    nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
        display: flex;
        flex-direction: column; // Link in colonna
    }

    nav a {
        display: block;
        padding: 0.75rem 1.5rem;
        color: var(--text-primary);
        text-decoration: none;
        font-weight: 600;
        border-radius: 8px;
        transition: background-color 0.2s ease, color 0.2s ease;

        &:hover, &.active {
            background-color: rgba(0, 0, 0, 0.05);
            color: var(--color-primary);
        }
    }
    
    // Il tuo stile per .mobile-auth-links va qui dentro
    .mobile-auth-links {
        // ... (il codice che hai già aggiunto è perfetto)
    }
}

// 3. REGOLE RESPONSIVE
// ---------------------------------------------------------------------
// Sotto la risoluzione desktop...
@media (max-width: $breakpoint-desktop) {
    // Nascondi la navigazione desktop e i link di autenticazione
    .main-navigation,
    .header-actions .auth-links {
        display: none;
    }

    // Mostra il bottone hamburger
    .hamburger-menu {
    display: none; // Nascosto di default
    width: 30px;
    height: 25px;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0;
    display: flex;
    flex-direction: column;
    justify-content: space-around;

    span {
        display: block;
        width: 100%;
        height: 3px;
        background-color: var(--text-primary);
        border-radius: 3px;
        transition: all 0.3s ease;
    }
}

    // --- NUOVE REGOLE PER SISTEMARE IL LAYOUT ---
    .header-content {
        // Invece di distribuire lo spazio, diciamo agli elementi
        // di posizionarsi ai lati e lasciamo che il logo stia a sinistra.
        justify-content: space-between; 
        
        // Diamo al logo lo spazio necessario per rimanere visibile
        .site-logo {
            flex-grow: 1; // Permette al logo di occupare lo spazio disponibile a sinistra
        }

        // Le azioni (hamburger, etc.) rimangono raggruppate a destra
        .header-actions {
            flex-shrink: 0; // Impedisce a questo contenitore di rimpicciolirsi
        }
    }
  
  
}
